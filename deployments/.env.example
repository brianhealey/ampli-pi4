# AmpliPi Docker Environment Variables
# Copy to .env and customize for your setup

# ============================================================================
# Container Images
# ============================================================================
# Override these for custom builds or specific versions
AMPLIPI_IMAGE=ghcr.io/brianhealey/amplipi:latest
DISPLAY_IMAGE=ghcr.io/brianhealey/amplipi-display:latest
AIRPLAY_IMAGE=ghcr.io/brianhealey/amplipi-airplay:latest
SPOTIFY_IMAGE=ghcr.io/brianhealey/amplipi-spotify:latest
PANDORA_IMAGE=ghcr.io/brianhealey/amplipi-pandora:latest
LMS_IMAGE=ghcr.io/brianhealey/amplipi-lms:latest
DLNA_IMAGE=ghcr.io/brianhealey/amplipi-dlna:latest

# ============================================================================
# Application Configuration
# ============================================================================
# Logging level: debug, info, warn, error
LOG_LEVEL=info

# Hardware mock mode (set to true for testing without hardware)
HARDWARE_MOCK=false

# Display type: tft or eink
DISPLAY_TYPE=tft

# Display refresh interval in milliseconds
REFRESH_INTERVAL=1000

# ============================================================================
# Macvlan Network Configuration
# ============================================================================
# IMPORTANT: Adjust these settings to match your network configuration
# Ensure the IP range is outside your router's DHCP range

# Physical network interface (e.g., eth0, wlan0)
MACVLAN_PARENT=eth0

# Network subnet (should match your router's network)
# Common examples:
#   - /24 = 192.168.1.0/24 (254 hosts, typical home network)
#   - /23 = 10.100.10.0/23 (510 hosts, larger network)
MACVLAN_SUBNET=10.100.10.0/23

# Gateway IP (usually your router's IP)
MACVLAN_GATEWAY=10.100.10.1

# IP range for AirPlay containers (CIDR notation)
# Reserve a small range of 4+ consecutive IPs for AirPlay instances
# Make sure this range is reserved/excluded from DHCP
# Example: /30 gives 4 usable IPs, /29 gives 8, /28 gives 16
MACVLAN_IP_RANGE=10.100.10.96/28

# ============================================================================
# AirPlay2 IP Addresses
# ============================================================================
# Static IP addresses for each AirPlay2 instance
# Must be within MACVLAN_IP_RANGE and outside DHCP pool
# Each AirPlay instance needs a unique IP to be discoverable
AIRPLAY1_IP=10.100.10.98
AIRPLAY2_IP=10.100.10.99
AIRPLAY3_IP=10.100.10.100
AIRPLAY4_IP=10.100.10.101

# ============================================================================
# Streaming Service Configuration
# ============================================================================
# Spotify Connect settings (if using streaming profile)
SPOTIFY_BITRATE=320  # Options: 96, 160, 320

# Spotify device name
SPOTIFY_NAME=AmpliPi

# ============================================================================
# Docker Compose Profiles
# ============================================================================
# Enable optional services by uncommenting the line below
# Available profiles: streaming
# COMPOSE_PROFILES=streaming

# ============================================================================
# Advanced Configuration
# ============================================================================
# Configuration directory mount point
CONFIG_DIR=/config

# API URL for display driver
API_URL=http://localhost/api

# ============================================================================
# Notes
# ============================================================================
# 1. REQUIRED: Configure Network Settings Above
#    - Copy this file to .env: cp .env.example .env
#    - Update MACVLAN_SUBNET, MACVLAN_GATEWAY, and AIRPLAY IPs for your network
#    - Reserve AirPlay IPs in your router (exclude from DHCP)
#    - Example: If DHCP range is .10-.90, use .95-.105 for static IPs
#
# 2. Finding Your Network Settings:
#    - Get your network: ip addr show eth0 | grep 'inet '
#    - Get your gateway: ip route | grep default
#    - Example output: "10.100.10.97/23 via 10.100.10.1"
#      â†’ Subnet: 10.100.10.0/23, Gateway: 10.100.10.1
#
# 3. Network Interface:
#    - Run 'ip link show' to find your interface name
#    - Common options: eth0 (wired), wlan0 (wireless)
#
# 4. Testing Macvlan:
#    - From another device: ping 10.100.10.98 (or your AIRPLAY1_IP)
#    - All 4 AirPlay IPs should be reachable
#    - Note: Host cannot ping macvlan IPs (kernel limitation)
#
# 5. Image Versions:
#    - Use 'latest' for automatic updates
#    - Use 'v1.0.0' for pinned versions
#    - Use branch name (e.g., '001-docker-migration') for development
