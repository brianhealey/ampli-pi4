import{d as Fe,b as v,a as g,f as x,s as p}from"../chunks/C9jWRzeA.js";import{p as Me,a as ae,b as Se,i as De,c as Ne,e as i,f as a,r,g as e,s as b,h as $,u as se}from"../chunks/BUyZVbJa.js";import{i as R}from"../chunks/CajUpCd9.js";import{e as H,a as V,r as de,b as J,c as be,d as K}from"../chunks/GxhOYdm0.js";import{b as Ie}from"../chunks/UnYSJ0yE.js";import{i as Pe,s as Ve}from"../chunks/DZldWtOb.js";var Le=x('<p class="text-xs text-gray-500 dark:text-gray-500"> </p>'),Re=x('<div class="mb-3 space-y-2"><div class="flex items-center justify-between"><span class="text-sm font-medium text-gray-700 dark:text-gray-300">Volume</span> <span class="text-sm text-gray-600 dark:text-gray-400"> </span></div> <input type="range" min="0" max="100" class="w-full accent-blue-600"/></div>'),qe=x('<div class="rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700/50"><div class="mb-2 flex items-center justify-between"><span class="text-sm font-medium text-gray-900 dark:text-white"> </span> <button> </button></div> <div class="space-y-1"><div class="flex items-center justify-between"><span class="text-xs text-gray-600 dark:text-gray-400">Volume</span> <span class="text-xs text-gray-600 dark:text-gray-400"> </span></div> <input type="range" min="0" max="100" class="w-full accent-blue-600"/></div></div>'),Ae=x("<option> </option>"),Be=x('<div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-800"><div class="mb-4 flex items-start justify-between"><div class="flex-1"><h3 class="font-semibold text-gray-900 dark:text-white"> </h3> <p class="text-sm text-gray-600 dark:text-gray-400"> </p> <!></div> <div class="flex gap-1"><button> </button> <button class="rounded p-2 text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20">üóëÔ∏è</button></div></div> <!> <div class="space-y-3"><p class="text-xs font-medium text-gray-700 dark:text-gray-300">Individual Zones:</p> <!></div> <div class="mt-3"><select class="w-full rounded-lg border border-gray-300 bg-white px-3 py-1.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"><option>Select source</option><!></select></div></div>'),Ee=x('<div class="rounded-lg border-2 border-dashed border-gray-300 p-12 text-center dark:border-gray-700"><p class="mb-2 text-gray-500 dark:text-gray-400">No groups created yet</p> <button class="text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">Create your first group</button></div>'),He=x('<span class="text-white">‚úì</span>'),Je=x('<button><div><!></div> <span class="text-sm text-gray-900 dark:text-white"> </span></button>'),Ke=x('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"><div class="w-full max-w-md rounded-lg bg-white p-6 shadow-xl dark:bg-gray-800"><h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Create Group</h3> <div class="mb-4"><label class="mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300">Group Name</label> <input type="text" placeholder="e.g., Living Room" class="w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"/></div> <div class="mb-4"><label class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Select Zones</label> <div class="max-h-60 space-y-1 overflow-y-auto"></div></div> <div class="flex gap-2"><button class="flex-1 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button> <button class="flex-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 disabled:opacity-50 dark:bg-blue-500 dark:hover:bg-blue-600">Create</button></div></div></div>'),Oe=x('<div class="p-4 md:p-6"><div class="mb-6 flex items-center justify-between"><div><h2 class="text-2xl font-bold text-gray-900 dark:text-white">Groups</h2> <p class="text-sm text-gray-600 dark:text-gray-400">Control multiple zones together</p></div> <button class="rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600">+ Create Group</button></div> <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3"></div> <!></div> <!>',1);function et(ge,pe){Me(pe,!0);let F=ae(!1),y=ae(""),c=ae(Se([]));async function xe(){if(e(y).trim())try{await K.createGroup({name:e(y),zones:e(c)}),b(F,!1),b(y,""),b(c,[],!0)}catch(s){console.error("Failed to create group:",s)}}async function O(s,t){try{await K.updateGroup(s,t)}catch(o){console.error("Failed to update group:",o)}}async function me(s){if(confirm("Delete this group?"))try{await K.deleteGroup(s)}catch(t){console.error("Failed to delete group:",t)}}function _e(s){e(c).includes(s)?b(c,e(c).filter(t=>t!==s),!0):b(c,[...e(c),s],!0)}async function ie(s,t){try{await K.updateZone(s,t)}catch(o){console.error("Failed to update zone:",o)}}function oe(s,t=-79,o=0){return s<=t?0:s>=o?100:Math.round((s-t)/(o-t)*100)}function fe(s,t=-79,o=0){return Math.round(t+s/100*(o-t))}var le=Oe(),Q=De(le),U=a(Q),ye=i(a(U),2);r(U);var W=i(U,2);H(W,21,()=>V.groups,s=>s.id,(s,t)=>{const o=se(()=>V.getGroupZones(e(t))),M=se(()=>e(t).source_id!==void 0?V.getSource(e(t).source_id):null);var S=Be(),h=a(S),D=a(h),N=a(D),q=a(N,!0);r(N);var I=i(N,2),u=a(I);r(I);var k=i(I,2);{var w=l=>{var d=Le(),n=a(d,!0);r(d),$(()=>p(n,e(M).name)),g(l,d)};R(k,l=>{e(M)&&l(w)})}r(D);var G=i(D,2),Z=a(G);let A;var X=a(Z,!0);r(Z);var B=i(Z,2);r(G),r(h);var E=i(h,2);{var j=l=>{var d=Re(),n=a(d),m=i(a(n),2),_=a(m);r(m),r(n);var L=i(n,2);de(L),r(d),$((f,P)=>{p(_,`${f??""}%`),be(L,P)},[()=>Math.round((e(t).vol_f??0)*100),()=>Math.round((e(t).vol_f??0)*100)]),v("input",L,f=>{const P=parseInt(f.currentTarget.value)/100;O(e(t).id,{vol_f:P})}),g(l,d)};R(E,l=>{e(t).vol_f!==void 0&&l(j)})}var C=i(E,2),Ze=i(a(C),2);H(Ze,17,()=>e(o),l=>l.id,(l,d)=>{var n=qe(),m=a(n),_=a(m),L=a(_,!0);r(_);var f=i(_,2);let P;var Ce=a(f,!0);r(f),r(m);var ve=i(m,2),z=a(ve),ce=i(a(z),2),Te=a(ce);r(ce),r(z);var ee=i(z,2);de(ee),r(ve),r(n),$((te,re)=>{p(L,e(d).name),P=J(f,1,"rounded p-1 hover:bg-gray-200 dark:hover:bg-gray-600",null,P,{"text-gray-400":e(d).mute,"text-blue-600":!e(d).mute,"dark:text-blue-400":!e(d).mute}),p(Ce,e(d).mute?"üîá":"üîä"),p(Te,`${te??""}%`),be(ee,re)},[()=>oe(e(d).vol,e(d).vol_min,e(d).vol_max),()=>oe(e(d).vol,e(d).vol_min,e(d).vol_max)]),v("click",f,()=>ie(e(d).id,{mute:!e(d).mute})),v("input",ee,te=>{const re=parseInt(te.currentTarget.value),$e=fe(re,e(d).vol_min,e(d).vol_max);ie(e(d).id,{vol:$e})}),g(l,n)}),r(C);var ue=i(C,2),T=a(ue),Y=a(T);Y.value=Y.__value=-1;var je=i(Y);H(je,17,()=>V.sources,l=>l.id,(l,d)=>{var n=Ae(),m=a(n,!0);r(n);var _={};$(()=>{p(m,e(d).name),_!==(_=e(d).id)&&(n.value=(n.__value=e(d).id)??"")}),g(l,n)}),r(T);var ne;Pe(T),r(ue),r(S),$(()=>{p(q,e(t).name),p(u,`${e(o).length??""} zone${e(o).length!==1?"s":""}`),A=J(Z,1,"rounded p-2 hover:bg-gray-100 dark:hover:bg-gray-700",null,A,{"text-gray-400":e(t).mute,"text-blue-600":!e(t).mute,"dark:text-blue-400":!e(t).mute}),p(X,e(t).mute?"üîá":"üîä"),ne!==(ne=e(t).source_id??-1)&&(T.value=(T.__value=e(t).source_id??-1)??"",Ve(T,e(t).source_id??-1))}),v("click",Z,()=>O(e(t).id,{mute:!(e(t).mute??!1)})),v("click",B,()=>me(e(t).id)),v("change",T,l=>O(e(t).id,{source_id:parseInt(l.currentTarget.value)})),g(s,S)}),r(W);var he=i(W,2);{var ke=s=>{var t=Ee(),o=i(a(t),2);r(t),v("click",o,()=>b(F,!0)),g(s,t)};R(he,s=>{V.groups.length===0&&s(ke)})}r(Q);var we=i(Q,2);{var Ge=s=>{var t=Ke(),o=a(t),M=i(a(o),2),S=i(a(M),2);de(S),r(M);var h=i(M,2),D=i(a(h),2);H(D,21,()=>V.zones.filter(u=>!u.disabled),u=>u.id,(u,k)=>{var w=Je(),G=a(w),Z=a(G);{var A=j=>{var C=He();g(j,C)},X=se(()=>e(c).includes(e(k).id));R(Z,j=>{e(X)&&j(A)})}r(G);var B=i(G,2),E=a(B,!0);r(B),r(w),$((j,C)=>{J(w,1,j),J(G,1,C),p(E,e(k).name)},[()=>`flex w-full items-center gap-2 rounded-lg border px-3 py-2 text-left transition-colors ${e(c).includes(e(k).id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"}`,()=>`flex h-5 w-5 items-center justify-center rounded border-2 ${e(c).includes(e(k).id)?"border-blue-600 bg-blue-600":"border-gray-300 dark:border-gray-600"}`]),v("click",w,()=>_e(e(k).id)),g(u,w)}),r(D),r(h);var N=i(h,2),q=a(N),I=i(q,2);r(N),r(o),r(t),$(u=>I.disabled=u,[()=>!e(y).trim()||e(c).length===0]),v("click",t,u=>{u.target===u.currentTarget&&b(F,!1)}),v("click",o,u=>u.stopPropagation()),Ie(S,()=>e(y),u=>b(y,u)),v("click",q,()=>{b(F,!1),b(y,""),b(c,[],!0)}),v("click",I,xe),g(s,t)};R(we,s=>{e(F)&&s(Ge)})}v("click",ye,()=>b(F,!0)),g(ge,le),Ne()}Fe(["click","input","change"]);export{et as component};
